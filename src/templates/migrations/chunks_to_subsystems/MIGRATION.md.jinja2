---
# Migration Status
status: ANALYZING
source_type: {{ source_type }}

# Progress Tracking
current_phase: 1
phases_completed: []
last_activity: {{ timestamp }}

# Timing
started: {{ timestamp }}
completed: null

# Discovery Summary
chunks_analyzed: 0
subsystems_proposed: 0
subsystems_approved: 0
questions_pending: 0
questions_resolved: 0

# Pause Context
pause_reason: null
paused_by: null
paused_at: null
resume_instructions: null
---

<!--
DO NOT DELETE THIS COMMENT BLOCK until migration reaches COMPLETED status.
This documents the frontmatter schema and guides migration workflow.

STATUS VALUES:
- ANALYZING: Running analysis phases (1-6), gathering information
- REFINING: Presenting proposals to operator, awaiting input on questions
- EXECUTING: Running migration phases (7-9), creating files and updating refs
- COMPLETED: Migration finished, chunks archived, subsystems active
- PAUSED: Explicitly paused for team review or operator break
- ABANDONED: Migration cancelled (can restart fresh)

STATUS TRANSITIONS:
  ANALYZING → REFINING    (when analysis phases complete)
  REFINING → EXECUTING    (when all subsystems approved)
  EXECUTING → COMPLETED   (when archive complete)
  Any → PAUSED            (operator requests pause)
  PAUSED → previous       (operator resumes)
  Any → ABANDONED         (operator cancels)

SOURCE_TYPE:
- chunks: Repository has docs/chunks/ with existing chunk documentation
- code_only: Repository has no chunks, discover subsystems from code

CURRENT_PHASE:
- 1-6: Analysis phases (discovery, mapping, boundaries)
- 7: Backreference planning
- 8: Synthesis and archive planning
- 9: Execution ordering
- 10: File operations (create subsystems, update refs)
- 11: Archive (move chunks to archive)

PAUSE CONTEXT:
When status is PAUSED, these fields explain why and how to resume:
- pause_reason: Why the pause occurred
- paused_by: "human" (operator requested) or "agent" (blocked on something)
- paused_at: Timestamp of pause
- resume_instructions: What to do to continue
-->

# Chunks to Subsystems Migration

## Current State

<!--
GUIDANCE: Update this section after each significant action.
This is the first thing an agent reads when resuming.

Include:
- What phase we're in
- What was last accomplished
- What needs to happen next
- Any blockers or questions
-->

Migration initialized. Beginning analysis phase.

## Proposed Subsystems

<!--
GUIDANCE: This table tracks all proposed subsystems and their approval status.

Status values:
- PROPOSED: Initial proposal, not yet reviewed
- REFINING: Operator is answering questions about this subsystem
- APPROVED: Operator approved, ready for execution
- REJECTED: Operator rejected, needs redesign (rare)

Update this table as subsystems move through refinement.
-->

| Subsystem | Status | Confidence | Questions Pending |
|-----------|--------|------------|-------------------|
| (none yet) | - | - | - |

## Progress Log

<!--
GUIDANCE: Append entries as phases complete. Never delete entries.
This provides archaeology for understanding how the migration progressed.

Format:
### Phase N: [Name] ([STATUS])
- Started: [timestamp]
- Completed: [timestamp] (if applicable)
- Key findings: [brief summary]
- Questions raised: [count] (if any)
-->

### Initialization
- Started: {{ timestamp }}
- Source type: {{ source_type }}
{% if source_type == 'chunks' %}
- Workflow: chunk_migration_bootstrap_workflow_v2.md
{% else %}
- Workflow: domain_oriented_bootstrap_workflow.md
{% endif %}

## Pending Questions

<!--
GUIDANCE: Track questions that need operator input.

Question lifecycle:
1. Detected during analysis → add here with status PENDING
2. Presented to operator → update with operator's answer
3. Applied to proposal → move to Resolved Questions section

Format:
### Q[N]: [Brief Title] ([STATUS])
**Context**: Why this question matters
**Options**:
- A) [option] - [implications]
- B) [option] - [implications]
**Agent Recommendation**: [A/B] because [reasoning]
**Asked**: [timestamp]
**Answered**: [timestamp or null]
**Resolution**: [what was decided]
-->

(None yet - questions will appear as analysis progresses)

## Resolved Questions

<!--
GUIDANCE: Move questions here once resolved. Preserves decision history.
-->

(None yet)

## Subsystem Details

<!--
GUIDANCE: For each proposed subsystem, provide synthesis summary.

This section helps operators understand what was discovered without
reading full proposal files. Update as refinement progresses.

Format:
### [Subsystem Name]
**Confidence**: X%
**Intent**: [synthesized from chunks/code]
**Key Invariants**: [from success criteria]
**Contributing Chunks**: [list if applicable]
**Open Questions**: [count]
-->

(Populated after analysis completes)

## Backreference Migration Plan

<!--
GUIDANCE: Track the plan for updating code backreferences.

Populated during Phase 7. Tracks:
- Files to update (src/ AND tests/)
- Current refs → new refs
- Priority order
- Template files needing special handling

IMPORTANT: Search ALL code locations including tests/:
  grep -r "# Chunk:" src/ tests/ --include="*.py"

Categories to track:
- Production code (src/**/*.py)
- Test files (tests/**/*.py) - commonly missed!
- Templates (src/templates/**/*.jinja2)
-->

### Production Code (src/)

(List files and their chunk → subsystem mappings)

### Test Files (tests/)

(List test files with backreferences - don't skip these!)

### Template Files

(Templates need source file updates, then `ve init` to regenerate)

### Summary

- [ ] All src/ backreferences updated
- [ ] All tests/ backreferences updated
- [ ] All template sources updated
- [ ] `ve init` run to regenerate from templates

## Archive Plan

<!--
GUIDANCE: Checklist for the archive phase.
Check items as they complete during execution.
-->

When migration completes:
- [ ] Create docs/archive/chunks/ directory
- [ ] Move all chunk directories to archive
- [ ] Remove empty docs/chunks/ directory
- [ ] Update CLAUDE.md to reflect subsystem workflow
- [ ] Verify all subsystem OVERVIEW.md files in docs/subsystems/
- [ ] Run validation checks
- [ ] Mark migration COMPLETED

## Validation Results

<!--
GUIDANCE: Record validation check results during execution.

Format:
| Check | Result | Notes |
|-------|--------|-------|
| Subsystems created | PASS/FAIL | [details] |
-->

(Populated during execution)

## Human Effort Summary

<!--
GUIDANCE: Summarize what automation accomplished vs what needs human review.

Populated after synthesis. Helps operators understand remaining work.

Include:
- Confidence percentages by subsystem
- Categories of human input needed
- Estimated time for review
- Priority order for review
-->

(Populated after synthesis)

## Post-Migration Notes

<!--
GUIDANCE: Record any notes for after migration completes.

Include:
- Subsystems that need additional human refinement
- Known issues or technical debt
- Recommendations for next steps
- Any deferred decisions
-->

(Populated at completion)
